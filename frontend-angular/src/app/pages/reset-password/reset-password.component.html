<div class="reset-password-container">
  <div class="reset-password-card">
    <h1>Redefinir Senha</h1>
    
    <div *ngIf="!success">
      <p class="description">
        Digite sua nova senha abaixo.
      </p>

      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="new_password">Nova senha</label>
          <input
            type="password"
            id="new_password"
            formControlName="new_password"
            class="form-control"
            [class.is-invalid]="resetPasswordForm.get('new_password')?.invalid && resetPasswordForm.get('new_password')?.touched"
            placeholder="Digite sua nova senha"
            autocomplete="new-password"
          />
          <div class="invalid-feedback" *ngIf="resetPasswordForm.get('new_password')?.errors?.['required']">
            Nova senha é obrigatória
          </div>
          <div class="invalid-feedback" *ngIf="resetPasswordForm.get('new_password')?.errors?.['minlength']">
            A senha deve ter no mínimo 6 caracteres
          </div>
        </div>

        <div class="form-group">
          <label for="confirm_password">Confirmar nova senha</label>
          <input
            type="password"
            id="confirm_password"
            formControlName="confirm_password"
            class="form-control"
            [class.is-invalid]="resetPasswordForm.get('confirm_password')?.invalid && resetPasswordForm.get('confirm_password')?.touched"
            placeholder="Confirme sua nova senha"
            autocomplete="new-password"
          />
          <div class="invalid-feedback" *ngIf="resetPasswordForm.get('confirm_password')?.errors?.['required']">
            Confirmação de senha é obrigatória
          </div>
          <div class="invalid-feedback" *ngIf="resetPasswordForm.errors?.['mismatch']">
            As senhas não coincidem
          </div>
        </div>

        <div class="error-message" *ngIf="error">
          {{ error }}
        </div>

        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="resetPasswordForm.invalid || loading"
        >
          <span *ngIf="!loading">Redefinir senha</span>
          <span *ngIf="loading" class="loading-spinner"></span>
        </button>
      </form>
    </div>

    <div *ngIf="success" class="success-message">
      <p>
        Sua senha foi redefinida com sucesso!
        Você pode fazer login com sua nova senha.
      </p>
      <button class="btn btn-primary" routerLink="/login">
        Ir para o login
      </button>
    </div>

    <div class="login-link">
      <p>Lembrou sua senha? <a routerLink="/login">Faça login</a></p>
    </div>
  </div>
</div> 